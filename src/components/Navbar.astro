---
import { Image } from "astro:assets";
import Link from "./Link";
import upperWaves from "../assets/logo/logoCMPupperWavesColored.svg";
import middleText from "../assets/logo/logoTextCMPcolored.svg";
import lowerWaves from "../assets/logo/logoCMPlowerWavesColored.svg";
---

<nav id="navbar" class="w-full shadow-xs fixed top-0 left-0 z-50 bg-white transition-all duration-300">
  <div class="max-w-7xl mx-auto px-4 flex justify-between items-center h-content">
    <div id="nav-links" class="flex items-center gap-12 h-32 transition-all duration-300">

      <!-- Logo -->
      <a id="nav-logo" href="/" class="h-30 w-30 font-bold text-gray-800 h-12 transition-all duration-300 flex flex-col align-middle items-center">
          <Image id="upperWaves" src={upperWaves} alt="Upper Waves" class="h-1/3 transition-all duration-300 mb-[-4px]" />
          <Image id="middleText" src={middleText} alt="Nav Image" class="h-1/3 transition-all duration-300" />
          <Image id="lowerWaves" src={lowerWaves} alt="Lower Waves" class="h-1/3 transition-all duration-300 mt-[-4px]" />
      </a>

      <!-- Menu centré -->
      <ul class="hidden md:flex space-x-8 text-lg font-medium text-[#313181]">
        <li>
          <a href="/#our-offices" class="hover:text-[#37A4B3] transition">Nos cabinets</a>
        </li>
        <li>
          <a href="/#our-team" class="hover:text-[#37A4B3] transition">Notre équipe</a>
        </li>
        <!-- <li>
          <a href="/blog" class="hover:text-[#37A4B3] transition">Blog</a>
        </li> -->
      </ul>

      

    </div>

    <!-- CTA droite -->
      <Link href="/contact" variant="button">
        <p class="hidden md:block">Contactez-nous</p>
        <img src="/src/assets/icon-mail-white.svg" class="h-6 md:hidden"/>
      </Link>
    
    <!-- Burger mobile -->
      <button class="md:hidden flex items-center text-3xl">
        ☰
      </button>
  </div>
</nav>

<script is:inline>
  const navbar = document.getElementById('navbar');
  const upper = document.getElementById('upperWaves');
  const middle = document.getElementById('middleText');
  const lower = document.getElementById('lowerWaves');
  const logo = document.getElementById('nav-logo');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      navbar.classList.add('scrolled');
      upper.style.height = '0';
      lower.style.height = '0';
      upper.style.opacity = '0';
      lower.style.opacity = '0';
      logo.style.justifyContent = 'center';
      middle.style.height = '40%';
    } else {
      navbar.classList.remove('scrolled');
      upper.style.height = '33%';
      lower.style.height = '33%';
      upper.style.opacity = '1';
      lower.style.opacity = '1';
      middle.style.height = '33%';
    }
  });
</script>

<style>
  nav {
    transition: all 0.3s ease;
  }
  nav.scrolled {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
    margin: 1rem;
    border-radius: 0.5rem; /* 8px */
    box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    width: calc(100% - 2rem); /* 2rem de chaque côté */
    backdrop-filter: blur(10px);
    background-color: rgb(255, 255, 255, 0.9); /* fond semi-transparent */
  }
  nav.scrolled #nav-links {
    height: 5rem; /* ajuste si nécessaire */
  }
  nav.scrolled img {
    transition: all 0.3s ease;
  }
</style>